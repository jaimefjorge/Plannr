@model IEnumerable<Plannr.Models.Enseignant>

@{
    ViewBag.Title = "IndexEnseignant";
}

<h2>Gestion des Enseignants</h2>

<div id="choixContainer">
<a href="@Url.Action("CreateEnseignant", "Administration")" class="btn btn-large btn-danger" id="Ajoutenseignant" style="margin-bottom:20px" >Create New</a>


<table class="table table-striped table-condensed">
    <tr >
        <th style="background-color:#00A7C8; color:white">
            @Html.DisplayNameFor(model => model.UserName)
        </th>
        <th></th>
    </tr>

@foreach (var item in Model) {
    <tr >
        <td>
            @Html.DisplayFor(modelItem => item.UserName)
        </td>
        <td >

            @Html.ActionLink("Edit", "EditEnseignant", new { id=item.UserId }) |
            @Html.ActionLink("Details", "DetailsEnseignant", new { id=item.UserId }) |
            @Html.ActionLink("Delete", "DeleteEnseignant", new { id=item.UserId })
        </td>
    </tr>
}

</table>

<a href="@Url.Action("Index", "Administration")" class="btn btn-large" id="cancelEdit">Back</a>
</div>

<div class="row" id="editContainer" style="display:none;">

</div>

<script type="text/javascript">

    var editLoaded = false;

    function showEdit() {
        $('#choixContainer').fadeOut("fast", function () {
            $('#editContainer').fadeIn()
        })

    }

    function showIndex() {
        $('#editContainer').fadeOut("fast", function () {
            $('#choixContainer').fadeIn()
            editLoaded = false;
        })

    }

    $('#cancelEdit').live('click', function (e) {

        showIndex()

        e.preventDefault()
        return false
    })

    $('#AjoutEnseignant').live('click', function (e) {
        if (!editLoaded) {
            $.get("@Url.Action("CreateEnseignant","Administration")", function (data) {

                $('#editContainer').html(data)
                showEdit()
                editLoaded = true
            })

        } else {
            showEdit()
        }
         e.preventDefault()
         e.stopPropagation()
         return false
    })

    </script>